<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" type="text/css" href="index.9374fc34.css"><link rel="stylesheet" type="text/css" href="index.61200b30.css"><title>睿几何设计平台</title><link rel="icon" type="image/x-icon" href="favicon.7b6df606.ico"></head><script src="index.005321cd.js"></script><script src="index.707a71a6.js"></script><script src="index.6e163a8b.js"></script><script src="index.f481487f.js"></script><script type="module" src="index.f84c612d.js"></script><script type="module" src="index.91e5d39f.js"></script><body> <script type="module">var t;t=new URL("mini_cycles.67867ca1.wasm",import.meta.url).toString();var n,e=(n="file:///src2/web3d/wasm/mini_cycles.js",function(e){var r,i,a=void 0!==(e=e||{})?e:{};a.ready=new Promise((function(t,n){r=t,i=n}));var o,u=Object.assign({},a),s=[],l="";"undefined"!=typeof document&&document.currentScript&&(l=document.currentScript.src),l=0!==(l=n).indexOf("blob:")?l.substr(0,l.replace(/[?#].*/,"").lastIndexOf("/")+1):"";var c,_,f=a.print||console.log.bind(console),h=a.printErr||console.warn.bind(console);Object.assign(a,u),u=null,a.arguments&&(s=a.arguments),a.thisProgram&&a.thisProgram,a.quit&&a.quit,a.wasmBinary&&(c=a.wasmBinary),a.noExitRuntime,"object"!=typeof WebAssembly&&j("no native wasm support detected");var m=!1;function p(t){return a["_"+t]}function g(t,n,e,r,i){var a={string:function(t){var n=0;if(null!=t&&0!==t){var e=1+(t.length<<2);!function(t,n,e){!function(t,n,e,r){if(!(r>0))return 0;for(var i=e+r-1,a=0;a<t.length;++a){var o=t.charCodeAt(a);if(o>=55296&&o<=57343&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++a)),o<=127){if(e>=i)break;n[e++]=o}else if(o<=2047){if(e+1>=i)break;n[e++]=192|o>>6,n[e++]=128|63&o}else if(o<=65535){if(e+2>=i)break;n[e++]=224|o>>12,n[e++]=128|o>>6&63,n[e++]=128|63&o}else{if(e+3>=i)break;n[e++]=240|o>>18,n[e++]=128|o>>12&63,n[e++]=128|o>>6&63,n[e++]=128|63&o}}n[e]=0}(t,w,n,e)}(t,n=V(e),e)}return n},array:function(t){var n=V(t.length);return function(t,n){d.set(t,n)}(t,n),n}},o=p(t),u=[],s=0;if(r)for(var l=0;l<r.length;l++){var c=a[e[l]];c?(0===s&&(s=K()),u[l]=c(r[l])):u[l]=r[l]}var _=o.apply(null,u);return _=function(t){return 0!==s&&Q(s),function(t){return"string"===n?R(t):"boolean"===n?Boolean(t):t}(t)}(_)}var y,d,w,v,A,b="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function x(t,n,e){for(var r=n+e,i=n;t[i]&&!(i>=r);)++i;if(i-n>16&&t.buffer&&b)return b.decode(t.subarray(n,i));for(var a="";n<i;){var o=t[n++];if(128&o){var u=63&t[n++];if(192!=(224&o)){var s=63&t[n++];if((o=224==(240&o)?(15&o)<<12|u<<6|s:(7&o)<<18|u<<12|s<<6|63&t[n++])<65536)a+=String.fromCharCode(o);else{var l=o-65536;a+=String.fromCharCode(55296|l>>10,56320|1023&l)}}else a+=String.fromCharCode((31&o)<<6|u)}else a+=String.fromCharCode(o)}return a}function R(t,n){return t?x(w,t,n):""}function S(t){y=t,a.HEAP8=d=new Int8Array(t),a.HEAP16=new Int16Array(t),a.HEAP32=v=new Int32Array(t),a.HEAPU8=w=new Uint8Array(t),a.HEAPU16=new Uint16Array(t),a.HEAPU32=A=new Uint32Array(t),a.HEAPF32=new Float32Array(t),a.HEAPF64=new Float64Array(t)}a.INITIAL_MEMORY;var E,I,P,C=[],D=[],k=[],O=0,F=null,T=null;function j(t){a.onAbort&&a.onAbort(t),h(t="Aborted("+t+")"),m=!0,t+=". Build with -sASSERTIONS for more info.";var n=new WebAssembly.RuntimeError(t);throw i(n),n}function H(t){return t.startsWith("data:application/octet-stream;base64,")}function M(t){try{if(t==I&&c)return new Uint8Array(c);if(o)return o(t);throw"both async and sync fetching of the wasm failed"}catch(t){j(t)}}function B(t){for(;t.length>0;){var n=t.shift();if("function"!=typeof n){var e=n.func;"number"==typeof e?void 0===n.arg?U(e)():U(e)(n.arg):e(void 0===n.arg?null:n.arg)}else n(a)}}a.locateFile?H(I="mini_cycles.wasm")||(P=I,I=a.locateFile?a.locateFile(P,l):l+P):I=new URL(t).toString();var W=[];function U(t){var n=W[t];return n||(t>=W.length&&(W.length=t+1),W[t]=n=E.get(t)),n}function L(t){this.excPtr=t,this.ptr=t-24,this.set_type=function(t){A[this.ptr+4>>2]=t},this.get_type=function(){return A[this.ptr+4>>2]},this.set_destructor=function(t){A[this.ptr+8>>2]=t},this.get_destructor=function(){return A[this.ptr+8>>2]},this.set_refcount=function(t){v[this.ptr>>2]=t},this.set_caught=function(t){t=t?1:0,d[this.ptr+12>>0]=t},this.get_caught=function(){return 0!=d[this.ptr+12>>0]},this.set_rethrown=function(t){t=t?1:0,d[this.ptr+13>>0]=t},this.get_rethrown=function(){return 0!=d[this.ptr+13>>0]},this.init=function(t,n){this.set_adjusted_ptr(0),this.set_type(t),this.set_destructor(n),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var t=v[this.ptr>>2];v[this.ptr>>2]=t+1},this.release_ref=function(){var t=v[this.ptr>>2];return v[this.ptr>>2]=t-1,1===t},this.set_adjusted_ptr=function(t){A[this.ptr+16>>2]=t},this.get_adjusted_ptr=function(){return A[this.ptr+16>>2]},this.get_exception_ptr=function(){if(X(this.get_type()))return A[this.excPtr>>2];var t=this.get_adjusted_ptr();return 0!==t?t:this.excPtr}}function q(t){try{return _.grow(t-y.byteLength+65535>>>16),S(_.buffer),1}catch(t){}}var z=[null,[],[]];function N(t,n){var e=z[t];0===n||10===n?((1===t?f:h)(x(e,0)),e.length=0):e.push(n)}var Y,G={c:function(t){return J(t+24)+24},b:function(t,n,e){throw new L(t).init(n,e),t},d:function(){j("")},f:function(t,n,e){w.copyWithin(t,n,n+e)},e:function(t){var n,e,r=w.length,i=2147483648;if((t>>>=0)>i)return!1;for(var a=1;a<=4;a*=2){var o=r*(1+.2/a);if(o=Math.min(o,t+100663296),q(Math.min(i,(n=Math.max(t,o))+((e=65536)-n%e)%e)))return!0}return!1},a:function(t,n,e,r){for(var i=0,a=0;a<e;a++){var o=A[n>>2],u=A[n+4>>2];n+=8;for(var s=0;s<u;s++)N(t,w[o+s]);i+=u}return A[r>>2]=i,0}},J=(function(){var t={a:G};function n(t,n){var e,r=t.exports;a.asm=r,S((_=a.asm.g).buffer),E=a.asm.l,e=a.asm.h,D.unshift(e),function(t){if(O--,a.monitorRunDependencies&&a.monitorRunDependencies(O),0==O&&(null!==F&&(clearInterval(F),F=null),T)){var n=T;T=null,n()}}()}function e(t){n(t.instance)}function r(n){return(c||"function"!=typeof fetch?Promise.resolve().then((function(){return M(I)})):fetch(I,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+I+"'";return t.arrayBuffer()})).catch((function(){return M(I)}))).then((function(n){return WebAssembly.instantiate(n,t)})).then((function(t){return t})).then(n,(function(t){h("failed to asynchronously prepare wasm: "+t),j(t)}))}if(O++,a.monitorRunDependencies&&a.monitorRunDependencies(O),a.instantiateWasm)try{return a.instantiateWasm(t,n)}catch(t){return h("Module.instantiateWasm callback failed with error: "+t),!1}(c||"function"!=typeof WebAssembly.instantiateStreaming||H(I)||"function"!=typeof fetch?r(e):fetch(I,{credentials:"same-origin"}).then((function(n){return WebAssembly.instantiateStreaming(n,t).then(e,(function(t){return h("wasm streaming compile failed: "+t),h("falling back to ArrayBuffer instantiation"),r(e)}))}))).catch(i)}(),a.___wasm_call_ctors=function(){return(a.___wasm_call_ctors=a.asm.h).apply(null,arguments)},a._is_planar=function(){return(a._is_planar=a.asm.i).apply(null,arguments)},a._get_minicycles=function(){return(a._get_minicycles=a.asm.j).apply(null,arguments)},a._malloc=function(){return(J=a._malloc=a.asm.k).apply(null,arguments)}),K=(a._free=function(){return(a._free=a.asm.m).apply(null,arguments)},a.stackSave=function(){return(K=a.stackSave=a.asm.n).apply(null,arguments)}),Q=a.stackRestore=function(){return(Q=a.stackRestore=a.asm.o).apply(null,arguments)},V=a.stackAlloc=function(){return(V=a.stackAlloc=a.asm.p).apply(null,arguments)},X=a.___cxa_is_pointer_type=function(){return(X=a.___cxa_is_pointer_type=a.asm.q).apply(null,arguments)};function Z(t){function n(){Y||(Y=!0,a.calledRun=!0,m||(B(D),r(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),function(){if(a.postRun)for("function"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;)t=a.postRun.shift(),k.unshift(t);var t;B(k)}()))}t=t||s,O>0||(function(){if(a.preRun)for("function"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)t=a.preRun.shift(),C.unshift(t);var t;B(C)}(),O>0||(a.setStatus?(a.setStatus("Running..."),setTimeout((function(){setTimeout((function(){a.setStatus("")}),1),n()}),1)):n()))}if(a.ccall=g,a.cwrap=function(t,n,e,r){var i=(e=e||[]).every((function(t){return"number"===t}));return"string"!==n&&i&&!r?p(t):function(){return g(t,n,e,arguments)}},T=function t(){Y||Z(),Y||(T=t)},a.run=Z,a.preInit)for("function"==typeof a.preInit&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();return Z(),e.ready});!function(t,n){var r,i=function(){return c.__string_rec(this,"")},a=a||{};Math.__name__=!0;class o{static string(t){return c.__string_rec(t,"")}}o.__name__=!0;class u extends Error{constructor(t,n,e){super(t),this.message=t,this.__previousException=n,this.__nativeException=null!=e?e:this}get_native(){return this.__nativeException}static thrown(t){if(t instanceof u)return t.get_native();if(t instanceof Error)return t;return new s(t)}}u.__name__=!0;class s extends u{constructor(t,n,e){super(String(t),n,e),this.value=t}}s.__name__=!0;var l=a["haxe.io.Error"]={__ename__:!0,__constructs__:null,Blocked:{_hx_name:"Blocked",_hx_index:0,__enum__:"haxe.io.Error",toString:i},Overflow:{_hx_name:"Overflow",_hx_index:1,__enum__:"haxe.io.Error",toString:i},OutsideBounds:{_hx_name:"OutsideBounds",_hx_index:2,__enum__:"haxe.io.Error",toString:i},Custom:(r=function(t){return{_hx_index:3,e:t,__enum__:"haxe.io.Error",toString:i}},r._hx_name="Custom",r.__params__=["e"],r)};l.__constructs__=[l.Blocked,l.Overflow,l.OutsideBounds,l.Custom];class c{static __string_rec(t,n){if(null==t)return"null";if(n.length>=5)return"<...>";let e=typeof t;switch("function"==e&&(t.__name__||t.__ename__)&&(e="object"),e){case"function":return"<function>";case"object":if(t.__enum__){let e=a[t.__enum__].__constructs__[t._hx_index],r=e._hx_name;return e.__params__?(n+="\t",r+"("+function(r){let i=[];{let r=0,a=e.__params__;for(;r<a.length;){let e=a[r];r+=1,i.push(c.__string_rec(t[e],n))}}return i}().join(",")+")"):r}if(t instanceof Array){let e="[";n+="\t";let r=0,i=t.length;for(;r<i;){let i=r++;e+=(i>0?",":"")+c.__string_rec(t[i],n)}return e+="]",e}let e;try{e=t.toString}catch(t){return"???"}if(null!=e&&e!=Object.toString&&"function"==typeof e){let n=t.toString();if("[object Object]"!=n)return n}let r="{\n";n+="\t";let i=null!=t.hasOwnProperty,o=null;for(o in t)i&&!t.hasOwnProperty(o)||"prototype"!=o&&"__class__"!=o&&"__super__"!=o&&"__interfaces__"!=o&&"__properties__"!=o&&(2!=r.length&&(r+=", \n"),r+=n+o+" : "+c.__string_rec(t[o],n));return r+="\n"+(n=n.substring(1))+"}",r;case"string":return t;default:return String(t)}}}c.__name__=!0;class _{static mallocInt2Array(t,n){let e=_.flattenArray(t),r=class{static fromArray(t,n,e){if(null==n&&(n=0),null==e&&(e=t.length-n),n<0||e<0||n+e>t.length)throw u.thrown(l.OutsideBounds);if(0==n&&e==t.length)return new Int32Array(t);let r=new Int32Array(t.length),i=0,a=e;for(;i<a;){let e=i++;r[e]=t[e+n]}return r}}.fromArray(e),i=n._malloc(4*r.length);return n.HEAP32.set(r,i/4|0),{ptr:i,length:e.length}}static mallocFloat2Array(t,n){let e=_.flattenArray(t),r=class{static fromArray(t,n,e){if(null==n&&(n=0),null==e&&(e=t.length-n),n<0||e<0||n+e>t.length)throw u.thrown(l.OutsideBounds);if(0==n&&e==t.length)return new Float32Array(t);let r=new Float32Array(t.length),i=0,a=e;for(;i<a;){let e=i++;r[e]=t[e+n]}return r}}.fromArray(e),i=n._malloc(4*r.length);return n.HEAPF32.set(r,i/4|0),{ptr:i,length:e.length}}static mallocDouble2Array(t,n){let e=_.flattenArray(t),r=Float64Array.from(e),i=n._malloc(8*r.length);return n.HEAPF64.set(r,i/8|0),{ptr:i,length:e.length}}static fromPointerToArrayInt2(t,n){let e=n/4,r=t.HEAP32.subarray(e,e+1);if(0==r)return[];let i=(0|e)+(0|r),a=t.HEAP32.subarray(e+1,i);return _.unFlattenArray(a)}static flattenArray(t){let n=[],e=0;for(;e<t.length;){let r=t[e];++e;let i=r.length;n.push(i);let a=0;for(;a<i;){let t=a++;n.push(r[t])}}return n}static unFlattenArray(t){let n=[],e=0;for(;e<t.length;){let r=t[e],i=[],a=0;for(;a<r;){let n=a++;i.push(t[e+n+1])}n.push(i),e+=r+1}return n}}_.__name__=!0;class f{static main(){console.log("src/wasm/MiniCycles.hx:18:","wasm"+o.string(f.module)),window.MiniCycles=f,console.log("src/wasm/MiniCycles.hx:22:",f)}static async init(t){if(null==f.module){let n=new e;f.module=await n,f.wasInit=!0,null!=t&&t()}}static getModule(){return f.wasInit}static is_planar(t,n){let e=(new Date).getTime(),r=_.mallocDouble2Array(t,f.module),i=_.mallocInt2Array(n,f.module),a=f.module.cwrap("is_planar","number",["number","number","number","number"])(r.ptr,r.length,i.ptr,i.length),o=(new Date).getTime();return console.log("is_planar time:"+(o-e)),f.module._free(r.ptr),f.module._free(i.ptr),1==a}static getResult(t,n){let e=(new Date).getTime(),r=_.mallocDouble2Array(t,f.module),i=_.mallocInt2Array(n,f.module),a=f.module.cwrap("get_minicycles","number",["number","number","number","number"])(r.ptr,r.length,i.ptr,i.length),o=(new Date).getTime();e=(new Date).getTime();let u=_.fromPointerToArrayInt2(f.module,a);return o=(new Date).getTime(),f.module._free(r.ptr),f.module._free(i.ptr),u}static test(){let t=[[11825.25,0],[11705.25,120.000244140625],[11585.25,240.000244140625],[0,0],[120,120.000244140625],[240,240.000244140625],[11825.25,7742.31005859375],[11705.25,7622.31005859375],[11585.25,7502.31005859375],[11825.25,4930.5401611328125],[11705.25,4930.5401611328125],[11585.25,5050.5401611328125],[11585.25,4810.5401611328125],[0,4930.5401611328125],[120,4930.5401611328125],[240,4870.5401611328125],[240,4990.5401611328125],[0,7742.31005859375],[120,7622.31005859375],[240,7502.31005859375],[5004.6402587890625,7742.31005859375],[5004.6402587890625,7622.31005859375],[4884.6402587890625,7502.31005859375],[5124.6402587890625,7502.31005859375],[4884.6402587890625,4990.5401611328125],[5004.6402587890625,4930.5401611328125],[5004.6402587890625,4870.5401611328125],[5124.6402587890625,5050.5401611328125],[5004.6402587890625,4810.5401611328125]],n=[[0,1],[1,2],[0,3],[2,5],[3,4],[4,5],[6,7],[7,8],[6,9],[8,11],[9,10],[10,11],[10,12],[9,0],[12,2],[3,13],[5,15],[13,14],[14,15],[14,16],[13,17],[16,19],[17,18],[18,19],[17,20],[19,22],[20,21],[21,22],[21,23],[20,6],[23,8],[16,24],[15,26],[24,25],[25,26],[27,25],[26,28],[27,11],[28,12],[23,27],[22,24]],e=(new Date).getTime();f.is_planar(t,n);let r=f.getResult(t,n),i=(new Date).getTime();console.log("src/wasm/MiniCycles.hx:143:","spend time: "+(i-e)+"ms"),console.log("src/wasm/MiniCycles.hx:145:",r)}}t.MiniCycles=f,f.__name__=!0,String.__name__=!0,Array.__name__=!0,Date.__name__="Date",c.__toStr={}.toString,f.wasInit=!1,f.main()}({}),async function(){await MiniCycles.init(),window.editor.list.pluginList.dispatch("ok")}();</script> </body></html>